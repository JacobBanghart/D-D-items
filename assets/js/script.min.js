var allitems=["all"],currencys=["currency"],ammos=["ammo"],armour=["armour"],melee=["melee"],gears=["gear"],ranged=["ranged"],weapons=["weapons"],shields=["shields"],potions=["potions"],rods=["rods"],rings=["rings"],spellscrolls=["spellscroll"],staffs=["staff"],wonderous=["wonderous"],wands=["wand"],magicitems=["magicitems"],gened=[],npcs=["npcs"],xhttp=new XMLHttpRequest,isnewnpc=!1,npcholder=null;function filter(){var s,e,t,i;for(s=document.getElementById("filter").value.toUpperCase(),e=document.getElementById("tablebody").getElementsByTagName("tr"),i=0;i<e.length;i++)(t=e[i].getElementsByTagName("td")[0])&&!$(e[i]).hasClass("information")&&(t.innerHTML.toUpperCase().indexOf(s)>-1?e[i].style.display="":e[i].style.display="none")}function showhide(s){$(s).closest("tr").nextUntil(".title").toggleClass("open")}function importitems(){var s=prompt("Type in the url of the items you want to import","http://example.com/items.xml");xhttp.open("GET",s,!0),xhttp.send()}xhttp.onreadystatechange=function(){this.readyState==XMLHttpRequest.DONE&&200==this.status&&(console.log("made it"),myFunction(this),(disp=[]).push(allitems),display())},xhttp.open("GET","magic.xml",!1),xhttp.send(),xhttp.open("GET","mundane.xml",!1),xhttp.send(),xhttp.open("GET","valueableitems.xml",!1),xhttp.send(),$("#filter").keyup(()=>{filter()});var locationinarray,disp=[allitems];function display(){for($("#tablebody").empty(),i=0;i<disp.length;i++)for(x=1;x<disp[i].length;x++)$("#tablebody").append("<tr class='title' onclick='showhide(this)'><td  style='border:3px solid white; border-radius:10px;'><h3>"+disp[i][x].name+"</h3></td><td class='type'  style='border:3px solid white; border-radius:10px;'><p>"+disp[i][x].type+"</p></td><td class='weight'  style='border:3px solid white; border-radius:10px;'><p>"+disp[i][x].weight+"</p></td></tr><tr class='information'><td colspan='3' style='border:2px solid gray;border-radius:10px'><p>"+disp[i][x].text+"</p></td></tr>")}function displayinside(s,e){s.text=s.text+"<tr class='title' onclick='showhide(this)'><td  style='border:3px solid white; border-radius:10px;'><h3>"+e.name+"</h3></td><td class='type'  style='border:3px solid white; border-radius:10px;'><p>"+e.type+"</p></td><td class='weight'  style='border:3px solid white; border-radius:10px;'><p>"+e.weight+"</p></td></tr><tr class='information'><td colspan='3' style='border:2px solid gray;border-radius:10px'><p>"+e.text+"</p></td></tr>"}function myFunction(s){var e=s.responseXML.getElementsByTagName("item");for(i=0;i<e.length;i++)new item(e[i])}function item(s){for(this.name="",this.type="",this.value="",this.weight="",this.text="",this.roll="",this.ac="",this.strength="",this.stealth="",this.modifier="",this.dmgType="",this.dmg1="",this.dmg2="",this.property="",this.range="",p=0;p<s.children.length;p++){var e=s.children[p].innerHTML;switch(s.children[p].tagName){case"name":this.name=this.name+e;break;case"type":this.type=this.type+e;break;case"value":this.value=this.value+e;break;case"weight":this.weight=this.weight+e;break;case"text":this.text=this.text+"<br>"+e;break;case"roll":this.roll=this.roll+"<br>"+e;break;case"ac":this.ac=this.ac+e;break;case"strength":this.strength=this.strength+e;break;case"stealth":this.stealth=this.stealth+e;break;case"modifier":this.modifier=this.modifier+"<br>"+e;break;case"dmgType":this.dmgType=this.dmgType+e;break;case"dmg1":this.dmg1=this.dmg1+e;break;case"property":this.property=this.property+e;break;case"range":this.range=this.range+e;break;case"dmg2":this.dmg2=this.dmg2+e;break;default:console.log(s.children[p].tagName)}}if(this.text=this.name+"<br>"+this.text,allitems.push(this),""!=this.type)switch(this.type){case"$":currencys.push(this);break;case"A":ammos.push(this);break;case"MA":case"HA":case"LA":armour.push(this);break;case"M":melee.push(this),weapons.push(this);break;case"R":ranged.push(this),weapons.push(this);break;case"G":gears.push(this);break;case"S":shields.push(this);break;case"P":potions.push(this),magicitems.push(this);break;case"RD":rods.push(this),magicitems.push(this);break;case"RG":rings.push(this),magicitems.push(this);break;case"SC":spellscrolls.push(this),magicitems.push(this);break;case"ST":staffs.push(this),magicitems.push(this);break;case"W":wonderous.push(this),magicitems.push(this);break;case"WD":wands.push(this),magicitems.push(this)}}function npc(s,e,t){this.name=s,this.type="npc",this.weight=null,this.description=e,this.arrays=[];var a=0;for(i=2;i<arguments.length;i++)this.arrays[a]=arguments[i],a++;this.text="",this.gennewitems=function(){for(this.text="",this.text="<p>Items</p><table class='container'><thead><tr><th>Name</th><th class='type'>Type</th><th class='weight'>Weight</th></tr></thead><tbody>",i=0;i<this.arrays.length;i++){var s=Math.round(5*Math.random());for(console.log(s),a=0;a<s;a++){var e=Math.round(Math.random()*this.arrays[i].length);displayinside(this,this.arrays[i][e])}}this.text=this.text+"</tbody></table>",display()},npcs.push(this),this.gennewitems()}$("#item").change(()=>{$("select option:selected").each((s,e)=>{switch(disp=[],e.value){case"all":disp.push(allitems);break;case"currency":disp.push(currencys);break;case"ammo":disp.push(ammos);break;case"armour":disp.push(armour);break;case"melee":disp.push(melee);break;case"gear":disp.push(gears);break;case"ranged":disp.push(ranged);break;case"weapon":disp.push(weapons);break;case"shield":disp.push(shields);break;case"potion":disp.push(potions);break;case"rod":disp.push(rods);break;case"ring":disp.push(rings);break;case"spell":disp.push(spellscrolls);break;case"staff":disp.push(staffs);break;case"wonderous":disp.push(wonderous);break;case"wand":disp.push(wands);break;case"magic":disp.push(magicitems);break;case"npc":disp.push(npcs)}display()})});